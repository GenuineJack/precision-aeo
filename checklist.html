<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>The AEO Readiness Checklist | Precision AEO</title>
<meta name="description" content="Download the AEO Readiness Checklist from Precision AEO to confirm your site is answer‚Äëready."/>
<link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;color:#222}
.wrap{max-width:1100px;margin:0 auto;padding:16px 24px}
header,footer{border-bottom:1px solid #edeff2}
.hero{background:#f5fdc6}
.hero .wrap{display:flex;gap:24px;align-items:center;justify-content:space-between;flex-wrap:wrap}
.hero h1{margin:0 0 8px 0;font-size:2rem}
.hero p{color:#555;margin:0 0 16px 0}
.card{background:#fff;border:1px solid #edeff2;border-radius:12px;padding:16px}
.btn{display:inline-block;background:#333;color:#fff;text-decoration:none;padding:12px 16px;border-radius:8px;font-weight:700}
input,button{font-family:inherit}
input{width:90%;padding:12px;border:1px solid #dcdfe3;border-radius:8px}
label{font-weight:600;font-size:.9rem}
small{color:#555}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px}
.notice{font-size:.85rem;color:#555}
img.hero{max-width:520px;width:100%;height:auto}
</style>
</head>
<body>
<header><div class="wrap" style="display:flex;justify-content:space-between;align-items:center">
  <a href="index.html" style="text-decoration:none;color:inherit;display:flex;align-items:center;gap:8px"><img src="assets/brand/PAEO-long_logo.png" alt="Precision AEO" style="height:28px"/></a>
</div></header>
<section class="hero"><div class="wrap">
  <div style="flex:1;min-width:280px">
    <h1>The AEO Readiness Checklist</h1>
    <p>Confirm the fundamentals that make your pages easy for AI to parse and quote.</p>
    <div class="card">
      <form id="lp-form" novalidate>
        <div style="display:grid;gap:8px">
          <div><label for="name">Name</label><input id="name" name="name" required placeholder="Your name"/></div>
          <div><label for="email">Email</label><input id="email" name="email" type="email" required placeholder="you@company.com"/></div>
          <input type="text" name="hp_field" id="hp_field" value="" style="position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden" aria-hidden="true" tabindex="-1"/>
          <small>By providing your contact information, you consent to receive communications from Precision AEO and its associates. You may opt out at any time.</small>
          <button class="btn" type="submit">Download the Checklist</button>
        </div>
      </form>
      <p id="form-msg" role="status" class="notice" style="display:none;margin-top:8px"></p>
    </div>
  </div>
  <img src="assets/landing/checklist_hero.png" alt="Checklist illustration" class="hero"/>
</div></section>
<section><div class="wrap">
  <div class="grid">
    <div class="card"><h3>What you'll get</h3><p class="notice">A concise list of technical, content, and authority checks for answer‚Äëready pages.</p></div>
    <div class="card"><h3>Use it weekly</h3><p class="notice">Turn it into a simple QA step for every page you publish.</p></div>
    <div class="card"><h3>Shareable</h3><p class="notice">Perfect for enabling content, dev, and SEO partners around a single checklist.</p></div>
  </div>
</div></section>
<footer><div class="wrap" style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap"><small>¬© 2025 Precision AEO</small><div><a href="privacy.html" style="margin-right:12px">Privacy</a><a href="terms.html">Terms</a></div></div></footer>
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script>
const SUPABASE_URL = 'https://hcgrmpgnxnajhachbqcr.supabase.co';
const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhjZ3JtcGdueG5hamhhY2hicWNyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU4ODgzNzIsImV4cCI6MjA3MTQ2NDM3Mn0.Zn-3tdIqYKNo1B2tDcRQscxj_2SiG4CEiB6wvLGH3-g';

const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

function validEmail(v) {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v);
}

// Test connection when page loads
document.addEventListener('DOMContentLoaded', async () => {
    try {
        const { data, error } = await supabase
            .from('landing_page_signups')
            .select('count', { count: 'exact', head: true });
        
        if (error) {
            console.error('‚ùå Database connection failed:', error);
        } else {
            console.log('‚úÖ Database connected successfully');
        }
    } catch (err) {
        console.error('‚ùå Connection test failed:', err);
    }
});

const form = document.getElementById('lp-form');
form.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const name = document.getElementById('name').value.trim();
    const email = document.getElementById('email').value.trim();
    const hp = document.getElementById('hp_field').value.trim();
    const msg = document.getElementById('form-msg');
    
    msg.style.display = 'block';
    msg.textContent = 'Submitting...';
    
    // Honeypot spam check
    if (hp) {
        msg.textContent = 'Error: invalid submission.';
        return;
    }
    
    // Validate inputs
    if (!validEmail(email) || !name) {
        msg.textContent = 'Please provide a valid name and email.';
        return;
    }
    
    // Figure out which page this is
    let source = 'unknown';
    if (window.location.pathname.includes('checklist')) source = 'checklist';
    else if (window.location.pathname.includes('playbook')) source = 'playbook';
    else if (window.location.pathname.includes('whitepaper')) source = 'whitepaper';
    
    try {
        console.log('üíæ Saving to database:', { name, email, source });
        
        // Save to new table
        const { data, error } = await supabase
            .from('landing_page_signups')
            .insert([{ name, email, source }])
            .select();
        
        if (error) {
            console.error('‚ùå Database save failed:', error);
            msg.textContent = `Database error, but your download will start anyway.`;
        } else {
            console.log('‚úÖ Saved successfully:', data);
            msg.textContent = 'Thanks! Your download should open in a new tab.';
        }
        
        // Open the PDF download
        let pdfUrl = 'assets/pdfs/checklist.pdf'; // default
        if (source === 'playbook') pdfUrl = 'assets/pdfs/playbook.pdf';
        else if (source === 'whitepaper') pdfUrl = 'assets/pdfs/whitepaper.pdf';
        
        window.open(pdfUrl, '_blank', 'noopener');
        form.reset();
        
    } catch (err) {
        console.error('‚ùå Unexpected error:', err);
        msg.textContent = `Error: ${err.message}. Download will still start.`;
        
        // Still provide download even if save fails
        let pdfUrl = 'assets/pdfs/checklist.pdf';
        if (source === 'playbook') pdfUrl = 'assets/pdfs/playbook.pdf';
        else if (source === 'whitepaper') pdfUrl = 'assets/pdfs/whitepaper.pdf';
        window.open(pdfUrl, '_blank', 'noopener');
    }
});
</script>
</body>
</html>
